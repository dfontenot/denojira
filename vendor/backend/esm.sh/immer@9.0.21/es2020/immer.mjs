/* esm.sh - immer@9.0.21 */
function O(e){for(var t=arguments.length,o=Array(t>1?t-1:0),r=1;r<t;r++)o[r-1]=arguments[r];if(0)var c,l;throw Error("[Immer] minified error nr: "+e+(o.length?" "+o.map((function(s){return"'"+s+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function N(e){return!!e&&!!e[d]}function D(e){var t;return!!e&&((function(o){if(!o||typeof o!="object")return!1;var r=Object.getPrototypeOf(o);if(r===null)return!0;var c=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return c===Object||typeof c=="function"&&Function.toString.call(c)===we})(e)||Array.isArray(e)||!!e[z]||!!(!((t=e.constructor)===null||t===void 0)&&t[z])||$(e)||G(e))}function Ee(e){return N(e)||O(23,e),e[d].t}function S(e,t,o){o===void 0&&(o=!1),I(e)===0?(o?Object.keys:R)(e).forEach((function(r){o&&typeof r=="symbol"||t(r,e[r],e)})):e.forEach((function(r,c){return t(c,r,e)}))}function I(e){var t=e[d];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:$(e)?2:G(e)?3:0}function x(e,t){return I(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function K(e,t){return I(e)===2?e.get(t):e[t]}function le(e,t,o){var r=I(e);r===2?e.set(t,o):r===3?e.add(o):e[t]=o}function pe(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function $(e){return Pe&&e instanceof Map}function G(e){return Oe&&e instanceof Set}function P(e){return e.o||e.t}function Q(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=he(e);delete t[d];for(var o=R(t),r=0;r<o.length;r++){var c=o[r],l=t[c];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(t[c]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[c]})}return Object.create(Object.getPrototypeOf(e),t)}function Z(e,t){return t===void 0&&(t=!1),ee(e)||N(e)||!D(e)||(I(e)>1&&(e.set=e.add=e.clear=e.delete=ve),Object.freeze(e),t&&S(e,(function(o,r){return Z(r,!0)}),!0)),e}function ve(){O(2)}function ee(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function _(e){var t=L[e];return t||O(18,e),t}function te(e,t){L[e]||(L[e]=t)}function M(){return C}function X(e,t){t&&(_("Patches"),e.u=[],e.s=[],e.v=t)}function U(e){H(e),e.p.forEach(de),e.p=null}function H(e){e===C&&(C=e.l)}function ae(e){return C={p:[],l:C,h:e,m:!0,_:0}}function de(e){var t=e[d];t.i===0||t.i===1?t.j():t.g=!0}function Y(e,t){t._=t.p.length;var o=t.p[0],r=e!==void 0&&e!==o;return t.h.O||_("ES5").S(t,e,r),r?(o[d].P&&(U(t),O(4)),D(e)&&(e=W(t,e),t.l||J(t,e)),t.u&&_("Patches").M(o[d].t,e,t.u,t.s)):e=W(t,o,[]),U(t),t.u&&t.v(t.u,t.s),e!==ne?e:void 0}function W(e,t,o){if(ee(t))return t;var r=t[d];if(!r)return S(t,(function(u,i){return ie(e,r,t,u,i,o)}),!0),t;if(r.A!==e)return t;if(!r.P)return J(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var c=r.i===4||r.i===5?r.o=Q(r.k):r.o,l=c,s=!1;r.i===3&&(l=new Set(c),c.clear(),s=!0),S(l,(function(u,i){return ie(e,r,c,u,i,o,s)})),J(e,c,!1),o&&e.u&&_("Patches").N(r,o,e.u,e.s)}return r.o}function ie(e,t,o,r,c,l,s){if(N(c)){var u=W(e,c,l&&t&&t.i!==3&&!x(t.R,r)?l.concat(r):void 0);if(le(o,r,u),!N(u))return;e.m=!1}else s&&o.add(c);if(D(c)&&!ee(c)){if(!e.h.D&&e._<1)return;W(e,c),t&&t.A.l||J(e,c)}}function J(e,t,o){o===void 0&&(o=!1),!e.l&&e.h.D&&e.m&&Z(t,o)}function q(e,t){var o=e[d];return(o?P(o):e)[t]}function ue(e,t){if(t in e)for(var o=Object.getPrototypeOf(e);o;){var r=Object.getOwnPropertyDescriptor(o,t);if(r)return r;o=Object.getPrototypeOf(o)}}function w(e){e.P||(e.P=!0,e.l&&w(e.l))}function B(e){e.o||(e.o=Q(e.t))}function F(e,t,o){var r=$(t)?_("MapSet").F(t,o):G(t)?_("MapSet").T(t,o):e.O?(function(c,l){var s=Array.isArray(c),u={i:s?1:0,A:l?l.A:M(),P:!1,I:!1,R:{},l,t:c,k:null,o:null,j:null,C:!1},i=u,n=T;s&&(i=[u],n=k);var a=Proxy.revocable(i,n),f=a.revoke,p=a.proxy;return u.k=p,u.j=f,p})(t,o):_("ES5").J(t,o);return(o?o.A:M()).p.push(r),r}function ye(e){return N(e)||O(22,e),(function t(o){if(!D(o))return o;var r,c=o[d],l=I(o);if(c){if(!c.P&&(c.i<4||!_("ES5").K(c)))return c.t;c.I=!0,r=ce(o,l),c.I=!1}else r=ce(o,l);return S(r,(function(s,u){c&&K(c.t,s)===u||le(r,s,t(u))})),l===3?new Set(r):r})(e)}function ce(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Q(e)}function ge(){function e(s,u){var i=l[s];return i?i.enumerable=u:l[s]=i={configurable:!0,enumerable:u,get:function(){var n=this[d];return T.get(n,s)},set:function(n){var a=this[d];T.set(a,s,n)}},i}function t(s){for(var u=s.length-1;u>=0;u--){var i=s[u][d];if(!i.P)switch(i.i){case 5:r(i)&&w(i);break;case 4:o(i)&&w(i)}}}function o(s){for(var u=s.t,i=s.k,n=R(i),a=n.length-1;a>=0;a--){var f=n[a];if(f!==d){var p=u[f];if(p===void 0&&!x(u,f))return!0;var h=i[f],v=h&&h[d];if(v?v.t!==p:!pe(h,p))return!0}}var y=!!u[d];return n.length!==R(u).length+(y?0:1)}function r(s){var u=s.k;if(u.length!==s.t.length)return!0;var i=Object.getOwnPropertyDescriptor(u,u.length-1);if(i&&!i.get)return!0;for(var n=0;n<u.length;n++)if(!u.hasOwnProperty(n))return!0;return!1}function c(s){s.g&&O(3,JSON.stringify(P(s)))}var l={};te("ES5",{J:function(s,u){var i=Array.isArray(s),n=(function(f,p){if(f){for(var h=Array(p.length),v=0;v<p.length;v++)Object.defineProperty(h,""+v,e(v,!0));return h}var y=he(p);delete y[d];for(var b=R(y),g=0;g<b.length;g++){var m=b[g];y[m]=e(m,f||!!y[m].enumerable)}return Object.create(Object.getPrototypeOf(p),y)})(i,s),a={i:i?5:4,A:u?u.A:M(),P:!1,I:!1,R:{},l:u,t:s,k:n,o:null,g:!1,C:!1};return Object.defineProperty(n,d,{value:a,writable:!0}),n},S:function(s,u,i){i?N(u)&&u[d].A===s&&t(s.p):(s.u&&(function n(a){if(a&&typeof a=="object"){var f=a[d];if(f){var p=f.t,h=f.k,v=f.R,y=f.i;if(y===4)S(h,(function(E){E!==d&&(p[E]!==void 0||x(p,E)?v[E]||n(h[E]):(v[E]=!0,w(f)))})),S(p,(function(E){h[E]!==void 0||x(h,E)||(v[E]=!1,w(f))}));else if(y===5){if(r(f)&&(w(f),v.length=!0),h.length<p.length)for(var b=h.length;b<p.length;b++)v[b]=!1;else for(var g=p.length;g<h.length;g++)v[g]=!0;for(var m=Math.min(h.length,p.length),j=0;j<m;j++)h.hasOwnProperty(j)||(v[j]=!0),v[j]===void 0&&n(h[j])}}}})(s.p[0]),t(s.p))},K:function(s){return s.i===4?o(s):r(s)}})}function be(){function e(r){if(!D(r))return r;if(Array.isArray(r))return r.map(e);if($(r))return new Map(Array.from(r.entries()).map((function(s){return[s[0],e(s[1])]})));if(G(r))return new Set(Array.from(r).map(e));var c=Object.create(Object.getPrototypeOf(r));for(var l in r)c[l]=e(r[l]);return x(r,z)&&(c[z]=r[z]),c}function t(r){return N(r)?e(r):r}var o="add";te("Patches",{$:function(r,c){return c.forEach((function(l){for(var s=l.path,u=l.op,i=r,n=0;n<s.length-1;n++){var a=I(i),f=s[n];typeof f!="string"&&typeof f!="number"&&(f=""+f),a!==0&&a!==1||f!=="__proto__"&&f!=="constructor"||O(24),typeof i=="function"&&f==="prototype"&&O(24),typeof(i=K(i,f))!="object"&&O(15,s.join("/"))}var p=I(i),h=e(l.value),v=s[s.length-1];switch(u){case"replace":switch(p){case 2:return i.set(v,h);case 3:O(16);default:return i[v]=h}case o:switch(p){case 1:return v==="-"?i.push(h):i.splice(v,0,h);case 2:return i.set(v,h);case 3:return i.add(h);default:return i[v]=h}case"remove":switch(p){case 1:return i.splice(v,1);case 2:return i.delete(v);case 3:return i.delete(l.value);default:return delete i[v]}default:O(17,u)}})),r},N:function(r,c,l,s){switch(r.i){case 0:case 4:case 2:return(function(u,i,n,a){var f=u.t,p=u.o;S(u.R,(function(h,v){var y=K(f,h),b=K(p,h),g=v?x(f,h)?"replace":o:"remove";if(y!==b||g!=="replace"){var m=i.concat(h);n.push(g==="remove"?{op:g,path:m}:{op:g,path:m,value:b}),a.push(g===o?{op:"remove",path:m}:g==="remove"?{op:o,path:m,value:t(y)}:{op:"replace",path:m,value:t(y)})}}))})(r,c,l,s);case 5:case 1:return(function(u,i,n,a){var f=u.t,p=u.R,h=u.o;if(h.length<f.length){var v=[h,f];f=v[0],h=v[1];var y=[a,n];n=y[0],a=y[1]}for(var b=0;b<f.length;b++)if(p[b]&&h[b]!==f[b]){var g=i.concat([b]);n.push({op:"replace",path:g,value:t(h[b])}),a.push({op:"replace",path:g,value:t(f[b])})}for(var m=f.length;m<h.length;m++){var j=i.concat([m]);n.push({op:o,path:j,value:t(h[m])})}f.length<h.length&&a.push({op:"replace",path:i.concat(["length"]),value:f.length})})(r,c,l,s);case 3:return(function(u,i,n,a){var f=u.t,p=u.o,h=0;f.forEach((function(v){if(!p.has(v)){var y=i.concat([h]);n.push({op:"remove",path:y,value:v}),a.unshift({op:o,path:y,value:v})}h++})),h=0,p.forEach((function(v){if(!f.has(v)){var y=i.concat([h]);n.push({op:o,path:y,value:v}),a.unshift({op:"remove",path:y,value:v})}h++}))})(r,c,l,s)}},M:function(r,c,l,s){l.push({op:"replace",path:[],value:c===ne?void 0:c}),s.push({op:"replace",path:[],value:r})}})}function me(){function e(u,i){function n(){this.constructor=u}c(u,i),u.prototype=(n.prototype=i.prototype,new n)}function t(u){u.o||(u.R=new Map,u.o=new Map(u.t))}function o(u){u.o||(u.o=new Set,u.t.forEach((function(i){if(D(i)){var n=F(u.A.h,i,u);u.p.set(i,n),u.o.add(n)}else u.o.add(i)})))}function r(u){u.g&&O(3,JSON.stringify(P(u)))}var c=function(u,i){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var f in a)a.hasOwnProperty(f)&&(n[f]=a[f])})(u,i)},l=(function(){function u(n,a){return this[d]={i:2,l:a,A:a?a.A:M(),P:!1,I:!1,o:void 0,R:void 0,t:n,k:this,C:!1,g:!1},this}e(u,Map);var i=u.prototype;return Object.defineProperty(i,"size",{get:function(){return P(this[d]).size}}),i.has=function(n){return P(this[d]).has(n)},i.set=function(n,a){var f=this[d];return r(f),P(f).has(n)&&P(f).get(n)===a||(t(f),w(f),f.R.set(n,!0),f.o.set(n,a),f.R.set(n,!0)),this},i.delete=function(n){if(!this.has(n))return!1;var a=this[d];return r(a),t(a),w(a),a.t.has(n)?a.R.set(n,!1):a.R.delete(n),a.o.delete(n),!0},i.clear=function(){var n=this[d];r(n),P(n).size&&(t(n),w(n),n.R=new Map,S(n.t,(function(a){n.R.set(a,!1)})),n.o.clear())},i.forEach=function(n,a){var f=this;P(this[d]).forEach((function(p,h){n.call(a,f.get(h),h,f)}))},i.get=function(n){var a=this[d];r(a);var f=P(a).get(n);if(a.I||!D(f)||f!==a.t.get(n))return f;var p=F(a.A.h,f,a);return t(a),a.o.set(n,p),p},i.keys=function(){return P(this[d]).keys()},i.values=function(){var n,a=this,f=this.keys();return(n={})[V]=function(){return a.values()},n.next=function(){var p=f.next();return p.done?p:{done:!1,value:a.get(p.value)}},n},i.entries=function(){var n,a=this,f=this.keys();return(n={})[V]=function(){return a.entries()},n.next=function(){var p=f.next();if(p.done)return p;var h=a.get(p.value);return{done:!1,value:[p.value,h]}},n},i[V]=function(){return this.entries()},u})(),s=(function(){function u(n,a){return this[d]={i:3,l:a,A:a?a.A:M(),P:!1,I:!1,o:void 0,t:n,k:this,p:new Map,g:!1,C:!1},this}e(u,Set);var i=u.prototype;return Object.defineProperty(i,"size",{get:function(){return P(this[d]).size}}),i.has=function(n){var a=this[d];return r(a),a.o?!!a.o.has(n)||!(!a.p.has(n)||!a.o.has(a.p.get(n))):a.t.has(n)},i.add=function(n){var a=this[d];return r(a),this.has(n)||(o(a),w(a),a.o.add(n)),this},i.delete=function(n){if(!this.has(n))return!1;var a=this[d];return r(a),o(a),w(a),a.o.delete(n)||!!a.p.has(n)&&a.o.delete(a.p.get(n))},i.clear=function(){var n=this[d];r(n),P(n).size&&(o(n),w(n),n.o.clear())},i.values=function(){var n=this[d];return r(n),o(n),n.o.values()},i.entries=function(){var n=this[d];return r(n),o(n),n.o.entries()},i.keys=function(){return this.values()},i[V]=function(){return this.values()},i.forEach=function(n,a){for(var f=this.values(),p=f.next();!p.done;)n.call(a,p.value,p.value,this),p=f.next()},u})();te("MapSet",{F:function(u,i){return new l(u,i)},T:function(u,i){return new s(u,i)}})}function _e(){ge(),me(),be()}function De(e){return e}function Ne(e){return e}var fe,C,re=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",Pe=typeof Map<"u",Oe=typeof Set<"u",se=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",ne=re?Symbol.for("immer-nothing"):((fe={})["immer-nothing"]=!0,fe),z=re?Symbol.for("immer-draftable"):"__$immer_draftable",d=re?Symbol.for("immer-state"):"__$immer_state",V=typeof Symbol<"u"&&Symbol.iterator||"@@iterator";var we=""+Object.prototype.constructor,R=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,he=Object.getOwnPropertyDescriptors||function(e){var t={};return R(e).forEach((function(o){t[o]=Object.getOwnPropertyDescriptor(e,o)})),t},L={},T={get:function(e,t){if(t===d)return e;var o=P(e);if(!x(o,t))return(function(c,l,s){var u,i=ue(l,s);return i?"value"in i?i.value:(u=i.get)===null||u===void 0?void 0:u.call(c.k):void 0})(e,o,t);var r=o[t];return e.I||!D(r)?r:r===q(e.t,t)?(B(e),e.o[t]=F(e.A.h,r,e)):r},has:function(e,t){return t in P(e)},ownKeys:function(e){return Reflect.ownKeys(P(e))},set:function(e,t,o){var r=ue(P(e),t);if(r?.set)return r.set.call(e.k,o),!0;if(!e.P){var c=q(P(e),t),l=c?.[d];if(l&&l.t===o)return e.o[t]=o,e.R[t]=!1,!0;if(pe(o,c)&&(o!==void 0||x(e.t,t)))return!0;B(e),w(e)}return e.o[t]===o&&(o!==void 0||t in e.o)||Number.isNaN(o)&&Number.isNaN(e.o[t])||(e.o[t]=o,e.R[t]=!0),!0},deleteProperty:function(e,t){return q(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,B(e),w(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var o=P(e),r=Reflect.getOwnPropertyDescriptor(o,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:o[t]}},defineProperty:function(){O(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){O(12)}},k={};S(T,(function(e,t){k[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),k.deleteProperty=function(e,t){return k.set.call(this,e,t,void 0)},k.set=function(e,t,o){return T.set.call(this,e[0],t,o,e[0])};var je=(function(){function e(o){var r=this;this.O=se,this.D=!0,this.produce=function(c,l,s){if(typeof c=="function"&&typeof l!="function"){var u=l;l=c;var i=r;return function(y){var b=this;y===void 0&&(y=u);for(var g=arguments.length,m=Array(g>1?g-1:0),j=1;j<g;j++)m[j-1]=arguments[j];return i.produce(y,(function(E){var oe;return(oe=l).call.apply(oe,[b,E].concat(m))}))}}var n;if(typeof l!="function"&&O(6),s!==void 0&&typeof s!="function"&&O(7),D(c)){var a=ae(r),f=F(r,c,void 0),p=!0;try{n=l(f),p=!1}finally{p?U(a):H(a)}return typeof Promise<"u"&&n instanceof Promise?n.then((function(y){return X(a,s),Y(y,a)}),(function(y){throw U(a),y})):(X(a,s),Y(n,a))}if(!c||typeof c!="object"){if((n=l(c))===void 0&&(n=c),n===ne&&(n=void 0),r.D&&Z(n,!0),s){var h=[],v=[];_("Patches").M(c,n,h,v),s(h,v)}return n}O(21,c)},this.produceWithPatches=function(c,l){if(typeof c=="function")return function(n){for(var a=arguments.length,f=Array(a>1?a-1:0),p=1;p<a;p++)f[p-1]=arguments[p];return r.produceWithPatches(n,(function(h){return c.apply(void 0,[h].concat(f))}))};var s,u,i=r.produce(c,l,(function(n,a){s=n,u=a}));return typeof Promise<"u"&&i instanceof Promise?i.then((function(n){return[n,s,u]})):[i,s,u]},typeof o?.useProxies=="boolean"&&this.setUseProxies(o.useProxies),typeof o?.autoFreeze=="boolean"&&this.setAutoFreeze(o.autoFreeze)}var t=e.prototype;return t.createDraft=function(o){D(o)||O(8),N(o)&&(o=ye(o));var r=ae(this),c=F(this,o,void 0);return c[d].C=!0,H(r),c},t.finishDraft=function(o,r){var c=o&&o[d],l=c.A;return X(l,r),Y(void 0,l)},t.setAutoFreeze=function(o){this.D=o},t.setUseProxies=function(o){o&&!se&&O(20),this.O=o},t.applyPatches=function(o,r){var c;for(c=r.length-1;c>=0;c--){var l=r[c];if(l.path.length===0&&l.op==="replace"){o=l.value;break}}c>-1&&(r=r.slice(c+1));var s=_("Patches").$;return N(o)?s(o,r):this.produce(o,(function(u){return s(u,r)}))},e})(),A=new je,Ae=A.produce,Se=A.produceWithPatches.bind(A),xe=A.setAutoFreeze.bind(A),Ie=A.setUseProxies.bind(A),Re=A.applyPatches.bind(A),ke=A.createDraft.bind(A),ze=A.finishDraft.bind(A),Me=Ae;export{je as Immer,Re as applyPatches,De as castDraft,Ne as castImmutable,ke as createDraft,ye as current,Me as default,_e as enableAllPlugins,ge as enableES5,me as enableMapSet,be as enablePatches,ze as finishDraft,Z as freeze,z as immerable,N as isDraft,D as isDraftable,ne as nothing,Ee as original,Ae as produce,Se as produceWithPatches,xe as setAutoFreeze,Ie as setUseProxies};
//# sourceMappingURL=immer.mjs.map